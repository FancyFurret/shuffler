@page "/"
@inherits ObserverComponent
@using Shuffler.Core
@using Shuffler.Core.Models
@using Shuffler.UI.Services
@inject ShufflerCore Shuffler
@inject HomeStateService HomeState

<div class="h-full flex overflow-hidden">
    <div class="flex-1 flex flex-col overflow-hidden relative">
        <Observer Observable="Shuffler.IsLoading">
            @if (context)
            {
                <div class="absolute inset-0 z-50">
                    <div class="w-full h-full backdrop-blur-sm flex items-center justify-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin">
                            </div>
                            <span class="text-sm text-foreground-400">Loading preset...</span>
                        </div>
                    </div>
                </div>
            }
        </Observer>
        <PresetViewer Session="Session" />
    </div>

    <PlayerDrawer Session="Session" />
</div>

@code {
    private ShufflerSession Session => Observe(Shuffler.Session);
}